<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>商品管理後台</title>
</head>
<body>

<h1>商品管理後台</h1>

<!-- 商品列表 -->
<table id="productTable">
    <thead>
    <tr>
        <th>商品ID</th>
        <th>商品名稱</th>
        <th>類別</th>
        <th>圖片URL</th>
        <th>價格</th>
        <th>庫存</th>
        <th>描述</th>
        <th>操作</th>
    </tr>
    </thead>
    <tbody id="productTbody">
    <!-- 商品數據將會填充到這裡 -->
    </tbody>
</table>
<div id="pagination"></div>

<!-- 新增商品的表單 -->
<!-- ... (稍後添加) -->

<script>
    async function fetchProducts(page = 1) {
        try {
            const limit = 10;
            const offset = (page - 1) * limit;
            const response = await fetch(`http://localhost:8080/api/products?limit=${limit}&offset=${offset}`); // 使用你的分頁API

            if (response.ok) {
                const data = await response.json();
                displayProducts(data.results);
                const totalPages = Math.ceil(data.total / limit);
                displayPagination(totalPages, page);
            } else {
                console.log("Failed to fetch products");
            }
        } catch (error) {
            console.error("An error occurred:", error);
        }
    }

    function displayPagination(totalPages, currentPage) {
        const pagination = document.getElementById('pagination');
        let html = '';
        for (let i = 1; i <= totalPages; i++) {
            html += `<button onclick="fetchProducts(${i})">${i}</button>`;
        }
        pagination.innerHTML = html;
    }

    function displayProducts(products) {
        const tbody = document.getElementById('productTbody');
        tbody.innerHTML = ''; // 清空表格

        products.forEach(product => {
            const row = `<tr>
            <td>${product.id}</td> <!-- 加入ID -->
            <td>${product.productName}</td>
            <td>${product.category}</td>
            <td><img src="${product.imageUrl}" alt="${product.productName}" width="50"></td>
            <td>${product.price}</td>
            <td>${product.stock}</td>
            <td>${product.description}</td>
            <!-- 其他欄位 -->
            </tr>`;
            tbody.innerHTML += row;
        });
    }

    // 初始化
    fetchProducts();

</script>

</body>
</html>
