<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>商品詳情</title>
    <!-- 引入Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

</head>
<body>
<div id="dynamicContent"></div>  <!-- 動態內容的容器 -->

<footer>
    <div id="footer"></div>  <!-- 頁尾的容器 -->
</footer>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script type="text/javascript">

    //==================================獲取當前頁面的路徑名稱==============================================
    let pathName = window.document.location.pathname;
    //==================================從路徑名稱中提取出項目名稱==============================================
    let projectName = pathName.substring(0, pathName.substring(1).indexOf("/") + 1);

    var contextPath = window.location.pathname.substring(0, window.location.pathname.indexOf("/",1));

    $(document).ready(function(){
        /* // 加載頁首
        $("#header").load("http://localhost:8081/Paradisiac/front-end/index/header.jsp"); */

        // 加載頁尾
        $("#footer").load("http://localhost:8081/Paradisiac/front-end/index/footer.jsp");

        // 處理會員登入
        $.ajax({
            type: "POST",
            url: "http://localhost:8081" + projectName + "/front-end/members/members.do?action=indexLogin",
            success: function(data) {
                // ... 登入邏輯
                const responseMessage = parseInt(data);
                var guided = contextPath + '/front-end/index/guided.jsp';
                var guidedSignout= contextPath + '/front-end/index/guidedSignout.jsp';
                if (responseMessage === 1) {
                    $("#dynamicContent").load(guided);
                } else if (responseMessage === 0) {

                    $("#dynamicContent").load(guidedSignout);
                }
            },
            error: function(error) {
                console.log("AJAX error:", error);
            }
        });
    });


</script>
</body>
</html>
